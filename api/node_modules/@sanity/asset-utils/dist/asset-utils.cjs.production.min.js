"use strict";function t(){return(t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function e(t){return(e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function i(t,e,s){return(i=n()?Reflect.construct.bind():function(t,e,n){var i=[null];i.push.apply(i,e);var s=new(Function.bind.apply(t,i));return n&&r(s,n.prototype),s}).apply(null,arguments)}function s(t){var n="function"==typeof Map?new Map:void 0;return(s=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,s)}function s(){return i(t,arguments,e(this).constructor)}return s.prototype=Object.create(t.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),r(s,t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0});var o=Object.freeze({left:0,top:0,bottom:0,right:0}),a=Object.freeze({x:.5,y:.5,height:1,width:1}),u=function(){return t({},o)},f=function(){return t({},a)},p=function(t){var e,n;function i(e,r){var n;return void 0===r&&(r="Failed to resolve asset ID from source"),(n=t.call(this,r)||this).unresolvable=!0,n.input=e,n}return n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),i}(s(Error));function l(t){return Boolean(t.unresolvable&&"input"in t)}function c(t){return function(){try{return t.apply(void 0,arguments)}catch(t){if(l(t))return;throw t}}}var d="https://cdn.sanity.io",h=/^https:\/\/cdn\.sanity\./,x=/^([a-zA-Z0-9_]{24,40}|[a-f0-9]{40})+\.[a-z0-9]+$/,m=/^file-([a-zA-Z0-9_]{24,40}|[a-f0-9]{40})+-[a-z0-9]+$/,g=/^([a-zA-Z0-9_]{24,40}|[a-f0-9]{40})-\d+x\d+\.[a-z0-9]+$/,y=/^image-([a-zA-Z0-9_]{24,40}|[a-f0-9]{40})+-\d+x\d+-[a-z0-9]+$/,v=/^(images|files)\/([a-z0-9]+)\/([a-z0-9][-\w]*)\//,w=/^(?:image-(?:[a-zA-Z0-9_]{24,40}|[a-f0-9]{40})+-\d+x\d+-[a-z0-9]+|file-(?:[a-zA-Z0-9_]{24,40}|[a-f0-9]{40})+-[a-z0-9]+)$/,I={projectId:"a",dataset:"b"};function b(t){return P(t)&&"string"==typeof t._ref}function A(t){return P(t)&&"string"==typeof t._id}function F(t){return P(t)&&"string"==typeof t.path}function j(t){return P(t)&&"string"==typeof t.url}function U(t){return P(t)&&"sanity.fileAsset"===t._type}function O(t){return P(t)&&"sanity.imageAsset"===t._type}function _(t){return y.test(t)}function R(t){return m.test(t)}function S(t){var e=t;return P(e)&&e.asset&&"object"==typeof e.asset}function P(t){return null!==t&&!Array.isArray(t)&&"object"==typeof t}function z(t,e){var r=(null==e?void 0:e.projectId)||t.projectId,n=(null==e?void 0:e.dataset)||t.dataset;if(!r||!n)throw new Error("Project details (projectId and dataset) required to resolve path for image");var i="metadata"in t?t.metadata.dimensions:{width:t.width,height:t.height};return"images/"+r+"/"+n+"/"+t.assetId+"-"+i.width+"x"+i.height+"."+t.extension+N("originalFilename"in t?t.originalFilename:void 0,t.vanityFilename,e)}function E(t,e){return d+"/"+z(t,e)}function D(t,e){var r=(null==e?void 0:e.projectId)||t.projectId,n=(null==e?void 0:e.dataset)||t.dataset;if(!r||!n)throw new Error("Project details (projectId and dataset) required to resolve path for file");return"files/"+r+"/"+n+"/"+t.assetId+"."+t.extension+N("originalFilename"in t?t.originalFilename:void 0,t.vanityFilename,e)}function L(t,e){return d+"/"+D(t,e)}function G(t){return S(t)?G(t.asset):b(t)?void 0:"string"==typeof t?v.test(T(t)||"")?$(t):void 0:F(t)?t.path:j(t)?$(t.url):void 0}function $(t){if(v.test(t))return t;if(!h.test(t))throw new p('Failed to resolve path from URL "'+t+'"');return new URL(t).pathname.replace(/^\/+/,"")}var T=c($);function Z(t){var e=(T(t)||t).replace(/^(images|files)\/[a-z0-9]+\/[a-z0-9][-\w]\/*/,"");if(!V(e))throw new p('Failed to resolve filename from URL "'+t+'"');return e}var M=c(Z);function V(t){return x.test(t)||g.test(t)}function N(t,e,r){var n=e||t;return!1!==(null==r?void 0:r.useVanityName)&&n?"/"+n:""}function B(t){if(y.test(t))return H(t);if(m.test(t))return C(t);throw new Error("Invalid image/file asset ID: "+t)}function C(t){if(!m.test(t))throw new Error("Malformed file asset ID '"+t+'\'. Expected an id like "file-027401f31c3ac1e6d78c5d539ccd1beff72b9b11-pdf"');var e=t.split("-");return{type:"file",assetId:e[1],extension:e[2]}}function H(t){var e=t.split("-"),r=e[1],n=e[2],i=e[3],s=(n||"").split("x").map(Number),o=s[0],a=s[1];if(!(r&&n&&i&&o>0&&a>0))throw new Error("Malformed asset ID '"+t+'\'. Expected an id like "image-027401f31c3ac1e6d78c5d539ccd1beff72b9b11-2000x3000-jpg".');return{type:"image",assetId:r,width:o,height:a,extension:i}}function k(t){var e=M(t)||"";if(!V(e))throw new Error("Invalid image/file asset filename: "+t);try{return B((g.test(e)?"image":"file")+"-"+e.replace(/\.([a-z0-9+]+)$/i,"-$1"))}catch(e){throw new Error("Invalid image/file asset filename: "+t)}}function q(e){if(!h.test(e))throw new Error("URL is not a valid Sanity asset URL: "+e);var r=new URL(e).pathname.replace(/^\/+/,""),n=r.match(v)||[],i=n[0],s=n[2],o=n[3];if(!i||!s||!o)throw new Error("URL is not a valid Sanity asset URL: "+e);var a=r.slice(i.length).split("/"),u=a[1];return t({},k(a[0]),{projectId:s,dataset:o,vanityFilename:u})}function W(t){try{return q(t).type}catch(t){return!1}}function J(t){var e=H(at(t)),r=e.width,n=e.height;return{width:r,height:n,aspectRatio:r/n}}var K=c(J);function Q(t){return mt(t)?nt(t,I).asset.extension:Y(t,I).asset.extension}var X=c(Q);function Y(t,e){var r=t;return{asset:et(t,e||dt(t)),crop:r.crop||u(),hotspot:r.hotspot||f()}}var tt=c(Y);function et(e,r){var n=t({},r||ct(e),{useVanityName:!1}),i=at(e),s=(e.asset||e).metadata||{},o=H(i),a=o.assetId,u=o.width,f=o.height,p=o.extension,l=u/f,c=t({},O(e)?e:{},{_id:i,_type:"sanity.imageAsset",assetId:a,extension:p,metadata:t({},s,{dimensions:{width:u,height:f,aspectRatio:l}}),url:"",path:""});return t({},c,{path:z(c,n),url:E(c,n)})}var rt=c(et);function nt(t,e){return{asset:st(t,e||dt(t))}}var it=c(nt);function st(e,r){var n=t({},r||ct(e),{useVanityName:!1}),i=at(e),s=e.asset||e,o=C(i),a=o.assetId,u=o.extension,f=t({},U(e)?e:{},{_id:i,_type:"sanity.fileAsset",assetId:a,extension:u,metadata:s.metadata||{},url:"",path:""});return t({},f,{path:D(f,n),url:L(f,n)})}var ot=c(st);function at(t){var e=S(t)?t.asset:t,r="";if("string"==typeof e?r=ft(e):b(e)?r=e._ref:A(e)?r=e._id:F(e)?r=lt(d+"/"+e.path):j(e)&&(r=lt(e.url)),!r||!w.test(r))throw new p(t);return r}var ut=c(at);function ft(t){if(w.test(t))return t;var e=h.test(t)?new URL(t).pathname:t;if(0===e.indexOf("/images")||0===e.indexOf("/files"))return lt(t);if(v.test(t))return lt(d+"/"+t);if(xt(t))return lt(d+"/files/a/b/"+t);if(ht(t))return lt(d+"/images/a/b/"+t);throw new p(t)}var pt=c(ft);function lt(t){var e=$(t).split("/"),r=e[3];return e[0].replace(/s$/,"")+"-"+r.replace(/\./g,"-")}function ct(t){var e=G(t);if(!e)throw new p(t,"Failed to resolve project ID and dataset from source");var r=e.match(v)||[],n=r[2],i=r[3];if(!n||!i)throw new p(t,"Failed to resolve project ID and dataset from source");return{projectId:n,dataset:i}}var dt=c(ct);function ht(t){return g.test(t)}function xt(t){return x.test(t)}function mt(t){var e=ut(t);return!!e&&e.startsWith("file-")}exports.DEFAULT_CROP=o,exports.DEFAULT_HOTSPOT=a,exports.buildFilePath=D,exports.buildFileUrl=L,exports.buildImagePath=z,exports.buildImageUrl=E,exports.getAssetDocumentId=at,exports.getAssetUrlType=W,exports.getDefaultCrop=u,exports.getDefaultHotspot=f,exports.getExtension=Q,exports.getFile=nt,exports.getFileAsset=st,exports.getIdFromString=ft,exports.getImage=Y,exports.getImageAsset=et,exports.getImageDimensions=J,exports.getProject=ct,exports.getUrlFilename=Z,exports.getUrlPath=$,exports.getVanityStub=N,exports.isAssetFilename=function(t){return ht(t)||xt(t)},exports.isAssetId=function(t){return _(t)||R(t)},exports.isAssetIdStub=A,exports.isAssetObjectStub=S,exports.isAssetPathStub=F,exports.isAssetUrlStub=j,exports.isDefaultCrop=function(t){return t.top===o.top&&t.bottom===o.bottom&&t.left===o.left&&t.right===o.right},exports.isDefaultHotspot=function(t){return t.x===a.x&&t.y===a.y&&t.width===a.width&&t.height===a.height},exports.isFileAssetFilename=xt,exports.isFileAssetId=R,exports.isFileSource=mt,exports.isImageAssetFilename=ht,exports.isImageAssetId=_,exports.isImageSource=function(t){var e=ut(t);return!!e&&e.startsWith("image-")},exports.isObject=P,exports.isReference=b,exports.isSanityAssetUrl=function(t){return!1!==W(t)},exports.isSanityFileAsset=U,exports.isSanityFileUrl=function(t){return"file"===W(t)},exports.isSanityImageAsset=O,exports.isSanityImageUrl=function(t){return"image"===W(t)},exports.isValidFilename=V,exports.parseAssetFilename=k,exports.parseAssetId=B,exports.parseAssetUrl=q,exports.parseFileAssetId=C,exports.parseFileAssetUrl=function(t){var e=q(t);if("file"!==e.type)throw new Error("URL is not a valid Sanity file asset URL: "+t);return e},exports.parseImageAssetId=H,exports.parseImageAssetUrl=function(t){var e=q(t);if("image"!==e.type)throw new Error("URL is not a valid Sanity image asset URL: "+t);return e},exports.tryGetAssetDocumentId=ut,exports.tryGetAssetPath=G,exports.tryGetExtension=X,exports.tryGetFile=it,exports.tryGetFileAsset=ot,exports.tryGetIdFromString=pt,exports.tryGetImage=tt,exports.tryGetImageAsset=rt,exports.tryGetImageDimensions=K,exports.tryGetProject=dt,exports.tryGetUrlFilename=M,exports.tryGetUrlPath=T;
//# sourceMappingURL=asset-utils.cjs.production.min.js.map
